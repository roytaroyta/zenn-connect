---
title: "05 投稿済み管理と重複検出"
---

投稿済み URL の管理と重複検出の設計についてまとめます。

目的:

- 同じコンテンツを複数回投稿しない
- 失敗時の再試行で重複を避ける

現状（要確認）:

- `data/posted.json` などに投稿履歴がある想定

検討すべき案:

1. 単純な URL のハッシュ保存（軽量）
2. 永続ストレージ（SQLite / DynamoDB / Cloud Firestore）
3. TTL を持たせたストレージ（短期重複回避）

実装例（擬似コード）:

- 投稿前にハッシュで存在確認
- 投稿後に成功を確定してから履歴へ追記

注意点:

- 同時実行時の競合対策（ロック、楽観的ロック）
- 履歴ファイルの肥大化対策
